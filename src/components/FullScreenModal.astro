---
interface Props {
  id: number;
  title?: string;
  subtitle?: string;
}

const { title, subtitle, id } = Astro.props;
---

<div
  id={`modal-${id}`}
  x-data="{ fullscreenModal: false }"
  x-init="$watch('fullscreenModal', function(value){if(value === true){document.body.classList.add('overflow-hidden');}else{ocument.body.classList.remove('overflow-hidden');}})"
  @keydown.escape.window="fullscreenModal = false"
>
  <div @click="fullscreenModal=true" class="cursor-pointer">
    <slot name="trigger" />
  </div>
  <template x-teleport="body">
    <div
      x-show="fullscreenModal"
      x-transition
      class="fullScreenModal flex fixed inset-0 z-[99] w-screen h-screen dark:bg-[#303037]/80 bg-[#e2e9e0]/60 backdrop-blur-md"
    >
      <button
        @click="fullscreenModal=false"
        class="absolute top-0 right-0 z-30 flex items-center justify-center px-3 py-2 mt-3 mr-3 space-x-1 text-xs rounded-md"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          ><path
            fill="currentColor"
            d="M5 5h2v2H5V5zm4 4H7V7h2v2zm2 2H9V9h2v2zm2 0h-2v2H9v2H7v2H5v2h2v-2h2v-2h2v-2h2v2h2v2h2v2h2v-2h-2v-2h-2v-2h-2v-2zm2-2v2h-2V9h2zm2-2v2h-2V7h2zm0 0V5h2v2h-2z"
          ></path></svg
        >
      </button>
      <div
        class="relative flex flex-col flex-wrap items-center justify-center w-full h-full px-8 py-5"
      >
        <div class="flex flex-col items-center justify-between mb-6 space-y-2">
          {
            title ? (
              <h1 id={`modal-${id}-title`} class="text-2xl xl:text-6xl">
                {title}
              </h1>
            ) : ("")
          }
          {
            subtitle ? (
              <p id={`modal-${id}-subtitle`} class="text-sm text-neutral-500">
                {subtitle}
              </p>
            ) : ("")
          }
        </div>
        <div
          id={`modal-${id}-content`}
          class="relative w-auto pb-8 text-center"
        >
          <slot />
        </div>
        <div
          id={`modal-${id}-footer`}
          class="flex flex-col-reverse sm:flex-row sm:justify-between sm:space-x-2"
        >
          <slot name="footer" />
        </div>
      </div>
    </div>
  </template>
</div>
